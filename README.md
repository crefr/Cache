# 2Q Cache Algorithm
Implementation of 2Q cache algorithm and ideal cache ([Bélády's optimal algorithm](https://en.wikipedia.org/wiki/Cache_replacement_policies#B%C3%A9l%C3%A1dy's_algorithm)).

2Q algorithm source is [this article](https://www.vldb.org/conf/1994/P439.PDF).

Ideal cache implementation was inspired by [orientiered's one](https://github.com/orientiered/ARC-Cache/blob/master/include/ideal.hpp).

## Build
To compile use these commands:

```bash
cmake -DCMAKE_BUILD_TYPE=Release -B build
cmake --build build
```

Compiled binaries `cache` and `ideal` are in folder `build`.

## Usage
There are two executable files - `cache` and `ideal`. `cache` runs 2Q and LRU (optional) caching algorithms, `ideal` is implementation of Bélády's optimal algorithm.

Both have the same input and output formats:

__Input__: cache_size, number of elements, elements.

__Output__: number of hits

`cache` supports two flags:
* "-v" - verbose. Program will print more info.
* "-l" - test LRU. If used with "-v", LRU cache is tested as well.

`ideal` supports only "-v" flag.

Example of using `cache`:
```bash
./build/cache -v -l
4 12 1 2 3 4 1 2 5 1 2 4 3 4
2Q cache hits number is 3 out of 12 (cache size is 4)
LRU cache hits number is 6 out of 12 (cache size is 4)
```

Example of using `ideal`:
```bash
./build/ideal -v
4 12 1 2 3 4 1 2 5 1 2 4 3 4
Ideal cache hits 7 out of 12 (cache size is 4)
```

## Testing
Most of the tests were generated by [`gen_tests.py`](gen_tests.py).

To run tests use:
```bash
cmake --build build --target test
```
